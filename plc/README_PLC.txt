MAGNET_ITLK_V15_20201125_0802 - The updated digital inputs (30 signals, changed some PV names). The last version before
		updating to TIA v15.1. The programmed interlock logic is below (not tested and maybe not complete).
MAGNET_ITLK_V15.1_20201125_1526.zap15_1 - Updated to TIA Portal V15.1. Updated the CPU firmware (in the project so it's the 
		same as in the hardware). Updated the Interlock conditions and the condition for LHe Flash box (the last version
		below)
MAGNET_ITLK_V15.1_20201202_1341 - FIxed the logic according to the last document. It requires some code cleaning (remove the unused
		objects - mainly dio objects.

Output and interlock logic:

#POLSW_INTERLOCK_1 := NOT("DIO_RDATA".POLSW_1_POS1.INTERLOCK XOR "DIO_RDATA".POLSW_1_POS2.INTERLOCK);

"DIO_RDATA".PC_1_PERMIT.INTERLOCK := "DIO_RDATA".NO_QUENCH.INTERLOCK OR
"DIO_RDATA".KEY1_OK.INTERLOCK OR
"DIO_RDATA".DAQ_OK.INTERLOCK OR "DIO_RDATA".DC24V_AUX1_OK.INTERLOCK OR
"DIO_RDATA".DC24V_AUX2_OK.INTERLOCK OR
"DIO_RDATA".EE_1_CLOSED.INTERLOCK OR "DIO_RDATA".EE_1_NO_ERROR_CL.INTERLOCK OR
"DIO_RDATA".EE_1_PC_SPA_OK.INTERLOCK OR
"DIO_RDATA".EE_1_POWER_PERM.INTERLOCK OR "DIO_RDATA".EE_1_REMOTE.INTERLOCK OR
"DIO_RDATA".LEAD_1_TEMP_OK.INTERLOCK OR "DIO_RDATA".LEAD_2_TEMP_OK.INTERLOCK OR
"DIO_RDATA".LEAD_1_VOLT_OK.INTERLOCK OR "DIO_RDATA".LEAD_2_VOLT_OK.INTERLOCK OR
"DIO_RDATA".PC_1_CONNECT.INTERLOCK OR "DIO_RDATA".PC_1_EXT_OUT.INTERLOCK OR
"DIO_RDATA".PC_1_POWER_Failure.INTERLOCK OR NOT("CPU_RDATA".CPU_CONF.GERSEMI_COM_OK) OR
"DIO_RDATA".EE_1_FS.INTERLOCK OR #POLSW_INTERLOCK_1;

#POLSW_INTERLOCK_2 := NOT("DIO_RDATA".POLSW_2_POS1.INTERLOCK XOR "DIO_RDATA".POLSW_2_POS2.INTERLOCK);

"DIO_RDATA".PC_2_PERMIT.INTERLOCK := "DIO_RDATA".NO_QUENCH.INTERLOCK OR
"DIO_RDATA".KEY2_OK.INTERLOCK OR
"DIO_RDATA".DAQ_OK.INTERLOCK OR "DIO_RDATA".DC24V_AUX1_OK.INTERLOCK OR
"DIO_RDATA".DC24V_AUX2_OK.INTERLOCK OR
"DIO_RDATA".EE_2_CLOSED.INTERLOCK OR "DIO_RDATA".EE_2_NO_ERROR_CL.INTERLOCK OR
"DIO_RDATA".EE_2_PC_SPA_OK.INTERLOCK OR
"DIO_RDATA".EE_2_POWER_PERM.INTERLOCK OR "DIO_RDATA".EE_2_REMOTE.INTERLOCK OR
"DIO_RDATA".LEAD_3_TEMP_OK.INTERLOCK OR "DIO_RDATA".LEAD_4_TEMP_OK.INTERLOCK OR
"DIO_RDATA".LEAD_3_VOLT_OK.INTERLOCK OR "DIO_RDATA".LEAD_4_VOLT_OK.INTERLOCK OR
"DIO_RDATA".PC_2_CONNECT.INTERLOCK OR "DIO_RDATA".PC_2_EXT_OUT.INTERLOCK OR
"DIO_RDATA".PC_2_POWER_Failure.INTERLOCK OR NOT("CPU_RDATA".CPU_CONF.GERSEMI_COM_OK) OR
"DIO_RDATA".EE_2_FS.INTERLOCK OR #POLSW_INTERLOCK_1;

// Direct Power Abort Interlock
// 

// Fast power abort
// 
"DIO_RDATA".PC_1_EXT.INTERLOCK := "DIO_RDATA".KEY1_OK.INTERLOCK OR
"DIO_RDATA".DC24V_AUX1_OK.INTERLOCK OR "DIO_RDATA".DC24V_AUX2_OK.INTERLOCK OR
"DIO_RDATA".NO_QUENCH.INTERLOCK OR #POLSW_INTERLOCK_1;

"DIO_RDATA".PC_2_EXT.INTERLOCK := "DIO_RDATA".KEY2_OK.INTERLOCK OR
"DIO_RDATA".DC24V_AUX1_OK.INTERLOCK OR "DIO_RDATA".DC24V_AUX2_OK.INTERLOCK OR
"DIO_RDATA".NO_QUENCH.INTERLOCK OR #POLSW_INTERLOCK_2;

// EE open request
// 
"IEC_Timer_EE1_DB".TP(IN:="DIO_RDATA".PC_1_EXT.INTERLOCK,
                    PT:=#pulse_time,
                    Q=>#EE_1_Open_RQ,
                    ET=>#t1);
"EE_1_OPEN_RQ" := NOT(#EE_1_Open_RQ);

"IEC_Timer_EE2_DB".TP(IN:="DIO_RDATA".PC_2_EXT.INTERLOCK,
                      PT:=#pulse_time,
                      Q=>#EE_2_Open_RQ,
                      ET=>#t2);
"EE_2_OPEN_RQ" := NOT (#EE_2_Open_RQ);


// Flash lights
//
"CPU_RDATA".CPU_CONF.FLSHBX_HV := NOT  ("DIO_RDATA".PC_1_EXT_OUT.INTERLOCK AND "DIO_RDATA".PC_2_EXT_OUT.INTERLOCK);
"FLSHBX_HVOLT" := "CPU_RDATA".CPU_CONF.FLSHBX_HV;

"CPU_RDATA".CPU_CONF.FLSHBX_HC := NOT ("DIO_RDATA".PC_1_EXT_OUT.INTERLOCK AND "DIO_RDATA".PC_2_EXT_OUT.INTERLOCK);
"FLSHBX_HCUR" := "CPU_RDATA".CPU_CONF.FLSHBX_HC;

"CPU_RDATA".CPU_CONF.FLSHBX_He := NOT ("DIO_RDATA".PC_1_PERMIT.INTERLOCK AND "DIO_RDATA".PC_2_PERMIT.INTERLOCK);
"FLSHBX_HE" := "CPU_RDATA".CPU_CONF.FLSHBX_He;
